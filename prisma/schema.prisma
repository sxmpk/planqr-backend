generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Keep User for now if we want to track logins, but C# didn't strictly require it for messages
model User {
  id        String   @id @default(uuid())
  username  String   @unique 
  role      String   @default("user") 
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Message {
  id          Int      @id @default(autoincrement()) // C# uses int
  body        String   // Was content
  lecturer    String
  login       String
  room        String
  lessonId    Int
  group       String
  createdAt   DateTime @default(now())
  
  // Kept from previous but optional now
  validUntil  DateTime? 
}

model DeviceList {
  id              Int      @id @default(autoincrement())
  deviceName      String?
  deviceClassroom String?
  deviceURL       String?  
  deviceId        String   @unique // The Client UUID
  status          String   @default("PENDING") // PENDING, ACTIVE
  lastSeen        DateTime @default(now())

  // New metadata
  ipAddress       String?
  deviceModel     String?
  userAgent       String?
  macAddress      String?
}
